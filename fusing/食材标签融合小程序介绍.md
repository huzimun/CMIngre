# 食材标签融合小程序介绍

## 界面展示

<div style="text-align: center;">
<img src=".\cover.png" alt="Fusing Cover"  width="80%" height="80%">
</div>

## 功能介绍

该小程序主要作用是对前期标注的食材标签进行整理及汇总，有两大作用

1. 对于标签语义模糊的标签，无法判断其在树中的归属，需要找到该标签所属图片，进行人工判断是否需要更改标签，或者是否需要删除标签
2. 对于语义相近的标签，需要进行人工合并

## 运行方式
```
python fuse_label_gui.py
```
## 按钮作用

1. **根节点**：展示结构树的根节点
2. **上一级**：展示结构树的上一级
3. **下一级**：展示结构树的下一级
4. **拟融合节点**：将拟融合的节点放入该缓存区
5. **融合**：将缓存区语义相近的标签执行融合操作，该小程序会弹出一个用户输入框，用户输入融合后的标签名称，并将该融合标签放入左侧结构树当前展示层级中，需注意，**融合节点只能是叶子节点**
6. **撤销**：回撤一步操作，<font color=red>**仅用于回撤上一次的融合节点操作**</font>。对于其他功能不执行回撤
7. **保存**：保存数据，有两个数据需要保存：**结构树**以及**原始标签-融合标签映射字典**

**注意**：融合操作仅限于叶子节点，融合操作逻辑为：

1. 点击融合按钮，弹出输入框，用户输入融合后的标签，程序将该标签放入结构树当前展示层级，如果结构树中已存在该标签，则不执行放入操作
2. 在结构树中删除拟融合节点缓存区的原始节点

所以，按照以上逻辑，**该程序对于标签融合有多种操作方式**：

1. 普通叶子节点融合，融合后节点为结构树中新节点：选择任意两个叶子节点，点击融合按钮并输入一个新节点加入结构树
2. 普通叶子节点融合，融合后节点为结构书中已存在节点：选择任意两个叶子节点，点击融合按钮并输入结构树当前层级中已存在的节点
3. 普通叶子节点更改节点名称：选择任意一个叶子节点，点击融合按钮并输入新节点名称，将其放入结构树当前层级中

## BUG记录

1. 当两个节点融合后的节点名称为 融合前其中一个节点后，融合的节点会被自动删除
   - 原因：先加入融合节点名称，由于结构树中已存在该节点，所以加入节点操作不执行；删除原始节点，由于融合后的节点名称和其中1个原始节点相同，所以融合后节点被自动删除，导致融合失败
   - 解决思路：在删除原有节点时，判断是否和融合节点名称相同，若相同，则不执行删除节点操作，仅记录当前节点操作

### 标签融合

- 桂花和菊花等花全部放到花菜类下面

- 肉新建一个肉类

- ”其它“下面的”食材“、“菜品”应该全部删除，放到食材树下的”舍弃“节点

- 还有一个BUG，转移一个没有数字的叶子节点将会出错 师兄已解决

- 淀粉厂里肉比淀粉多，归为肉类！

- 空的节点应该如何操作？如果是其他，全部融合到舍弃类

- 能不能合并，按照“种”来划分，比如燕麦和莜麦不能合并

- “粉”里面有粗的细的宽的。细的是粉丝，粗的是粉条，宽的是宽粉，不能合并

- 豆芽无法判断是绿豆芽还是黄豆芽，数量众多，不能合并

- 洋葱和洋葱圈图片很不同，不能合并

- 蛋节点里包含不同的蛋，而且数量只有6个，比较少，舍弃？不舍弃了，放到蛋类及制品下面

- 舍弃类中的蛋和菜，应该还有用，查看一下图片
  
  - 蛋都是蛋，但是有鸡蛋也有鸭蛋，所以放到鸡蛋和鸭蛋同一个层级下面
  
  - 菜都是蔬菜，和蔬菜合并后放到根菜同一层级下面
