### 数据概况

根据全部数据**all_in.csv**文件选取所有in属性标签至少出现在5张图片中的标签，共517个in标签

一共2个人打标签，每个人约260个标签

### 输入要求

1. **全部ingredient数据、对应的特征**，用于文本聚类，这两个文件不可以更改

2. **待处理的未标记食材**和**已经标记的结构树**（结构树存在默认文件）

### 运行方式
```
python gui.py
```

### 环境要求

1. sklearn  用于文本聚类
2. tkinter 用于gui可视化：[ParthJadhav/Tkinter-Designer: An easy and fast way to create a Python GUI 🐍 (github.com)](https://github.com/ParthJadhav/Tkinter-Designer)

### 功能展示

| 功能名称        | 功能作用                                                                                                           |
| ----------- | -------------------------------------------------------------------------------------------------------------- |
| 首页          | 将未标记食材可视化返回首页，展示前64个标签                                                                                         |
| 上一页         | 返回当前64个标签的前64个标签，如果当前页为首页，则返回警告                                                                                |
| 下一页         | 返回当前64个标签的后64个标签，如果当前页为尾页，则返回警告                                                                                |
| 根节点         | 返回已标注结构树的根节点                                                                                                   |
| 下一级         | 返回结构树当前级别的下一级节点                                                                                                |
| 上一级         | 返回结构树当前级别的上一级节点                                                                                                |
| 点击“未标记食材块”  | 将未标记食材存入“标记食材缓存区”                                                                                              |
| 点击“结构树叶子节点” | 进入该结构树节点的下一级节点                                                                                                 |
| 删除节点缓存区     | 将当前节点的父节点加入“删除节点缓存区”，再次点击删除节点即可删除该节点以及子树。$\textcolor{red}{注意，尽可能不要删除非叶子节点，否则很麻烦，无法撤销操作。删除节点最好仅删除叶子节点}$         |
| 标记节点        | 将“标记食材缓存区”的食材存入结构树当前级别，并在未标记食材区中删除对应食材。$\textcolor{red}{切记，添加多个节点时，必须为结构树同一父节点下，函数会自动调用结构树可视化区域当前节点，作为插入的父节点}$ |
| 删除节点        | 将“删除节点缓存区”中的叶子节点删除，并放入未标记食材区。$\textcolor{red}{删除对应节点后，结构树会默认返回当前节点的上一节点进行可视化}$                                 |
| 添加新节点       | 一些食材所属类别可能并不在规定类别中，或者认为一些食材应该具有更细致的分类，可以通过添加新节点按钮，在$\textcolor{red}{结构树当前节点下}$新建一个节点                           |
| 保存数据        | 实时保存数据                                                                                                         |
| PS          | 不能直接停止程序，只能通过关掉UI界面来结束程序运行。如果直接停止，则未保存的已经标注部分数据的结构树则不会保存，只有正常关闭，最后程序会自动保存标注好的结构树                               |

### 具体流程

1. **多人标注过程**
   - 每一页为64个食材，为一个batch。每一个batch的标注大概在2小时左右，主要因为大量的食材都不认识。
   - batch标注最终的结果有2个文件，一个是标注好的结构树，另一个是未标注的食材（对于食材名称模糊，存在歧义，无法判断的食材可以将其放入到**其他**类别中）
   - 注意：每个人主观程度不一样，需要对于食材进行二次标注。
   - 花费时间：大约1天
2. **标签整理过程**
   - **汇总**2类文件，多人标注过程会出现33个未标注json，以及33个结构树json，通过遍历所有食材名称，汇总成1个未标注json，1个结构树json
   - **整理1--剩余标签**：存在歧义、模糊的标签，需要定位到原始图片中，判断具体标签语义，并更改对应文本标签
   - **整理2-已标记结构树**：一共19个大类的结构树，每个人分到2大类，进行语义近似标签的融合，尽可能地减少相同语义标签数量。**融合标签的时候结构树可视化需要加上食材出现的次数，用于判断该食材出现频次以及重要性
